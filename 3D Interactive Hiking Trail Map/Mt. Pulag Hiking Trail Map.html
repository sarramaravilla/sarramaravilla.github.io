<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>3D Interactive Hiking Map: Mt. Pulag</title>

  <style>
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }
  </style>

  <link rel="stylesheet" href="https://js.arcgis.com/4.23/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.23/"></script>

  <script>
    require([
      "esri/config",
      "esri/Map",
      "esri/views/MapView",
      "esri/views/SceneView",
      "esri/layers/FeatureLayer"
    ], function (esriConfig, Map, MapView, SceneView, FeatureLayer) {

      //esriConfig.apiKey = "AAPK023d3678289d4661ab740346f67338b2w2dPpDFrVin-37k5MQpx2V2AKwVG8gWiU-vzadOwwgux3tDtJkHBBsYucLpsBySM";

      const map = new Map({
        basemap: "hybrid", // Basemap layer service
        ground: "world-elevation"
      });

      const view = new SceneView({
        container: "viewDiv",
          map: map,
          camera: {
            position: [120.893273, 16.520, 7000], 
            tilt: 60,
          },
          environment: {
            background: {
              type: "color", // autocasts as new ColorBackground()
              color: [0, 0, 0, 1]
            },
            // disable stars
            starsEnabled: false,
            //disable atmosphere
            atmosphereEnabled: false
          }
      });

      function shiftCamera(deg) {
          var camera = view.camera.clone();
          camera.position.longitude += deg;
          return camera;
        }

      //Trailheads feature layer (points)
      const trailheadsLayer = new FeatureLayer({
        url: "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads/FeatureServer/0"
      });
      map.add(trailheadsLayer);

      //Trailheads feature layer (points)
      const trailheadsLayer2 = new FeatureLayer({
        url: "https://services8.arcgis.com/h9TUF6x5VzqLQaYx/arcgis/rest/services/AmbangegTrail/FeatureServer"
      });
      map.add(trailheadsLayer2);

      //Trails feature layer (lines)
      const trailsLayer = new FeatureLayer({
        url: "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails/FeatureServer/0",
        definitionExpression: "ELEV_GAIN < 250",
        renderer: {
          type: "simple",
          symbol: {
            type: "simple-line",
            color: "green",
            width: "2px"
          }
        },
        outFields: ["TRL_NAME", "ELEV_GAIN"],
        pompTemplate: {
          title: "{TRL_NAME}",
          content: "The trail elevation gain is {ELEV_GAIN} ft."
        }
      });
      map.add(trailsLayer, 0);

      // Parks and open spaces (polygons)
      const parksLayer = new FeatureLayer({
        url: "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space/FeatureServer/0"
      });
      map.add(parksLayer, 0);

      

    });
  </script>

</head>

<body>
  <div id="viewDiv"></div>
</body>

</html>